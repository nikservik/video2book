# Управление проектами на фронтенде

Мы переключаем работу с проектами с фронт-энда почти полностью на бэк-энд.
Все данные о проекте теперь хранятся на бекенде. Нам нужно сделать новое отображение.

## Переиспользование визуализации
### 1) Список проектов на главной отображаем как раньше.
- поиск пока не реализовываем, пусть остается поле поиска как есть
- для каждого проекта в списке:
    - убираем иконки папки проекта и удаления
    - убираем название папки проекта
    - остается названи и даты создания и добавления
    - при клике на проект переходим на отображение проекта

### 2) Старый ProjectView можно использовать для визуализации PipelineRun
- список шагов и элементы управления оставляем прежними
    - шаг «Нормализация аудио» убираем
- в поле контента:
    - оставляем название, модель, использование токенов
    - убираем название файла
    - убираем кнопку «открыть файл»

## Организация кода
Делаем отдельную папку для views и сервис для работы с api.

### ProjectView
Отображение очень похоже на список проектов:
- слева список уроков
- над списком уроков кнопка «+ Добавить урок»
- над списком уроков нет заголовка и нет поля для поиска
- справа блок для быстрого добавления нового урока, куда можно перетащить файл

Каждый элемент в списке уроков:
- название урока (заголовок)
- список PipelineRun
    - отступ слева
    - укладываем в grid
    - каждый PipelineRun описывается в одну строку
    - на каждый можно кликнуть и перейти на PipelineRunVeiw
    - для каждого элемента:
        - название пайплайна
        - версия пайплайна
        - количество выполненных шагов/общее количество шагов
    - в конце списка кнопка «+ Добавить пайплайн»

### CreateLessonView
Это универсальное view для создания урока и для создания проекта. Потому что создание проекта подразумевает добавление урока.
За основу берем старый CreateProjectView.

Если это создание проекта, то запрашиваем:
- Название проекта
- Название первого урока
- Медиа-файл первого урока
- В конце кнопка «Создать проект»

Если это создание урока, то запрашиваем:
- Название урока
- Медиа-файл урока
- В конце кнопка «Добавить урок»

При выборе медиа-файла не делаем оценку длительности.

Над полями формы показываем прогресс-бар с шагами:
- Данные проекта/урока
- Нормализация аудио
- Загрузка аудио

Шаблон кода для прогресс-бара:
<template>
  <div>
    <div class="mt-6" aria-hidden="true">
      <div class="overflow-hidden rounded-full bg-gray-200 dark:bg-white/10">
        <div class="h-2 rounded-full bg-indigo-600 dark:bg-indigo-500" style="width: 37.5%"></div>
      </div>
      <div class="mt-6 hidden grid-cols-4 text-sm font-medium text-gray-600 sm:grid dark:text-gray-400">
        <div class="text-indigo-600 dark:text-indigo-400">Copying files</div>
        <div class="text-center text-indigo-600 dark:text-indigo-400">Migrating database</div>
        <div class="text-center">Compiling assets</div>
        <div class="text-right">Deployed</div>
      </div>
    </div>
  </div>
</template>

После нажатия на кнопку создания/добавления блокируется форма и сама кнопка и делаем шаги:
- нормализация аудио во временный файл с ffmpeg. Этот код уже написан, используем его.
- проверяем размер получившегося файла, если слишком большой - выдаем ошибку и просим загрузить другой файл или разбить урок на части.
- загружаем файл на сервер.
- в процессе отображаем прогресс шагов.
- после удачной загрузки переходим на просмотр проекта.

### PipelineRunView
Описано выше, переиспользуем старый ProjectView