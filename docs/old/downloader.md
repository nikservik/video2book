# Фича: Загрузка медиа с youtube

Нужно добавить возможность скачивать медиа-файл урока с youtube.

## Скачивание на бекенде

Сейчас у нас есть метод LessonController@uploadAudio, который принимает готовый медиа-файл с фронта и диспатчит задачу обработки пайплайна.

Нам нужно добавить возможность скачивать аудио с youtube вместо загрузки с фронта.
- Загрузку нужно делать отдельным Job, чтобы не рисковать таймаутом запроса.
- Сразу предусмотри трансляцию событий скачивания в очередь задач (PipelineQueueEvent):
    - старт задачи
    - завершение загрузки
    - прогресс загрузки в процентах
- Транслируй прогресс скачивания каждые 3 секунды
- При создании урока с загрузкой ставить ему settings->downloading = true, а после завершения загрузки менять на false.

### Как скачивать с youtube
1) Скачать аудио с youtube
    - Скачивать нужно с помощью yt-dlp (уже установлен на сервере и прописан в PATH).
    - Для работы с yt-dlp используй пакет norkunas/youtube-dl-php (уже установлен).
    - Скачивай с youtube только аудио (опция `-f ba`)
    - Не используй ->extractAudio(true)
2) Нормализовать скачанное аудио
    - Нормализовать нужно с помощью ffmpeg с настройками, как на фронте в electronAPI.normalizeAudio().
    - Для работы с ffmpeg используй пакет protonemedia/laravel-ffmpeg (уже установлен).
    - После нормализации не забудь удалить скачанный файл-исходник
    - Нормализованное аудио сохраняй с тем же путем, как LessonController@uploadAudio
3) Диспатчить обработку пайплайна
    - Так же, как в LessonController@uploadAudio

## Оформление на фронтенде

### Создание урока
В **CreateLessonView** сейчас есть поле для выбора медиа-файла.
- Добавь над полем переключатель Файл/Ссылка
- Если выбрана Ссылка, то показывай текстовый input

Если указана ссылка, то применяй новую логику создания урока:
- Вместо uploadAudio вызывай новый метод API, который запускает загрузку
- Пропускаем шаги нормализации и загрузки и сразу переключаемся на ProjectView

В **ProjectView**:
- уроки со статусом settings->downloading = true отображаем disabled
    - серое название урока и названия пайплайнов
    - на пайплайны урока нельзя кликнуть
    - «добавить пайплайн» тоже нельзя кликнуть
- после обновления статуса на settings->downloading = false делаем урок активным
    - нужно отслеживать события очереди и обновлять статус урока, если он поменялся

В **виджете очереди**:
- Показывать задачи загрузки отдельным списком, не смешивать с runs
- Не нужно добавлять надписей о пустой очереди загрузок
